.include "macros.inc"

.section .text  # 0x801800AC - 0x80180170

.global CARDGetSerialNo
CARDGetSerialNo:
/* 801800AC 0017D0AC  7C 08 02 A6 */	mflr r0
/* 801800B0 0017D0B0  2C 03 00 00 */	cmpwi r3, 0
/* 801800B4 0017D0B4  90 01 00 04 */	stw r0, 4(r1)
/* 801800B8 0017D0B8  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 801800BC 0017D0BC  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 801800C0 0017D0C0  3B E4 00 00 */	addi r31, r4, 0
/* 801800C4 0017D0C4  41 80 00 0C */	blt lbl_801800D0
/* 801800C8 0017D0C8  2C 03 00 02 */	cmpwi r3, 2
/* 801800CC 0017D0CC  41 80 00 0C */	blt lbl_801800D8
lbl_801800D0:
/* 801800D0 0017D0D0  38 60 FF 80 */	li r3, -128
/* 801800D4 0017D0D4  48 00 00 88 */	b lbl_8018015C
lbl_801800D8:
/* 801800D8 0017D0D8  38 81 00 10 */	addi r4, r1, 0x10
/* 801800DC 0017D0DC  4B FF A8 61 */	bl __CARDGetControlBlock
/* 801800E0 0017D0E0  2C 03 00 00 */	cmpwi r3, 0
/* 801800E4 0017D0E4  40 80 00 08 */	bge lbl_801800EC
/* 801800E8 0017D0E8  48 00 00 74 */	b lbl_8018015C
lbl_801800EC:
/* 801800EC 0017D0EC  80 61 00 10 */	lwz r3, 0x10(r1)
/* 801800F0 0017D0F0  38 E0 00 00 */	li r7, 0
/* 801800F4 0017D0F4  38 C0 00 00 */	li r6, 0
/* 801800F8 0017D0F8  80 A3 00 80 */	lwz r5, 0x80(r3)
/* 801800FC 0017D0FC  38 80 00 00 */	li r4, 0
/* 80180100 0017D100  80 65 00 04 */	lwz r3, 4(r5)
/* 80180104 0017D104  80 05 00 00 */	lwz r0, 0(r5)
/* 80180108 0017D108  7C E7 1A 78 */	xor r7, r7, r3
/* 8018010C 0017D10C  38 65 00 08 */	addi r3, r5, 8
/* 80180110 0017D110  7C C6 02 78 */	xor r6, r6, r0
/* 80180114 0017D114  80 05 00 08 */	lwz r0, 8(r5)
/* 80180118 0017D118  80 63 00 04 */	lwz r3, 4(r3)
/* 8018011C 0017D11C  7C C6 02 78 */	xor r6, r6, r0
/* 80180120 0017D120  7C E7 1A 78 */	xor r7, r7, r3
/* 80180124 0017D124  38 65 00 10 */	addi r3, r5, 0x10
/* 80180128 0017D128  80 05 00 10 */	lwz r0, 0x10(r5)
/* 8018012C 0017D12C  80 63 00 04 */	lwz r3, 4(r3)
/* 80180130 0017D130  7C C6 02 78 */	xor r6, r6, r0
/* 80180134 0017D134  7C E7 1A 78 */	xor r7, r7, r3
/* 80180138 0017D138  38 65 00 18 */	addi r3, r5, 0x18
/* 8018013C 0017D13C  80 05 00 18 */	lwz r0, 0x18(r5)
/* 80180140 0017D140  80 63 00 04 */	lwz r3, 4(r3)
/* 80180144 0017D144  7C C6 02 78 */	xor r6, r6, r0
/* 80180148 0017D148  7C E7 1A 78 */	xor r7, r7, r3
/* 8018014C 0017D14C  90 FF 00 04 */	stw r7, 4(r31)
/* 80180150 0017D150  90 DF 00 00 */	stw r6, 0(r31)
/* 80180154 0017D154  80 61 00 10 */	lwz r3, 0x10(r1)
/* 80180158 0017D158  4B FF A8 9D */	bl __CARDPutControlBlock
lbl_8018015C:
/* 8018015C 0017D15C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80180160 0017D160  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80180164 0017D164  38 21 00 20 */	addi r1, r1, 0x20
/* 80180168 0017D168  7C 08 03 A6 */	mtlr r0
/* 8018016C 0017D16C  4E 80 00 20 */	blr 

.include "macros.inc"

.section .text  # 0x8017FA78 - 0x8017FC2C

.global DeleteCallback
DeleteCallback:
/* 8017FA78 0017CA78  7C 08 02 A6 */	mflr r0
/* 8017FA7C 0017CA7C  90 01 00 04 */	stw r0, 4(r1)
/* 8017FA80 0017CA80  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8017FA84 0017CA84  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8017FA88 0017CA88  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8017FA8C 0017CA8C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8017FA90 0017CA90  7C 9D 23 79 */	or. r29, r4, r4
/* 8017FA94 0017CA94  93 81 00 10 */	stw r28, 0x10(r1)
/* 8017FA98 0017CA98  3B 83 00 00 */	addi r28, r3, 0
/* 8017FA9C 0017CA9C  1C BC 01 10 */	mulli r5, r28, 0x110
/* 8017FAA0 0017CAA0  3C 60 80 24 */	lis r3, lbl_80245540@ha
/* 8017FAA4 0017CAA4  38 03 55 40 */	addi r0, r3, lbl_80245540@l
/* 8017FAA8 0017CAA8  7F E0 2A 14 */	add r31, r0, r5
/* 8017FAAC 0017CAAC  83 DF 00 D0 */	lwz r30, 0xd0(r31)
/* 8017FAB0 0017CAB0  38 00 00 00 */	li r0, 0
/* 8017FAB4 0017CAB4  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 8017FAB8 0017CAB8  41 80 00 1C */	blt lbl_8017FAD4
/* 8017FABC 0017CABC  A0 9F 00 BE */	lhz r4, 0xbe(r31)
/* 8017FAC0 0017CAC0  38 7C 00 00 */	addi r3, r28, 0
/* 8017FAC4 0017CAC4  38 BE 00 00 */	addi r5, r30, 0
/* 8017FAC8 0017CAC8  4B FF CA D1 */	bl __CARDFreeBlock
/* 8017FACC 0017CACC  7C 7D 1B 79 */	or. r29, r3, r3
/* 8017FAD0 0017CAD0  40 80 00 2C */	bge lbl_8017FAFC
lbl_8017FAD4:
/* 8017FAD4 0017CAD4  38 7F 00 00 */	addi r3, r31, 0
/* 8017FAD8 0017CAD8  38 9D 00 00 */	addi r4, r29, 0
/* 8017FADC 0017CADC  4B FF AF 19 */	bl __CARDPutControlBlock
/* 8017FAE0 0017CAE0  28 1E 00 00 */	cmplwi r30, 0
/* 8017FAE4 0017CAE4  41 82 00 18 */	beq lbl_8017FAFC
/* 8017FAE8 0017CAE8  39 9E 00 00 */	addi r12, r30, 0
/* 8017FAEC 0017CAEC  7D 88 03 A6 */	mtlr r12
/* 8017FAF0 0017CAF0  38 7C 00 00 */	addi r3, r28, 0
/* 8017FAF4 0017CAF4  38 9D 00 00 */	addi r4, r29, 0
/* 8017FAF8 0017CAF8  4E 80 00 21 */	blrl 
lbl_8017FAFC:
/* 8017FAFC 0017CAFC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8017FB00 0017CB00  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8017FB04 0017CB04  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8017FB08 0017CB08  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8017FB0C 0017CB0C  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8017FB10 0017CB10  38 21 00 20 */	addi r1, r1, 0x20
/* 8017FB14 0017CB14  7C 08 03 A6 */	mtlr r0
/* 8017FB18 0017CB18  4E 80 00 20 */	blr 

.global CARDDeleteAsync
CARDDeleteAsync:
/* 8017FB1C 0017CB1C  7C 08 02 A6 */	mflr r0
/* 8017FB20 0017CB20  90 01 00 04 */	stw r0, 4(r1)
/* 8017FB24 0017CB24  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8017FB28 0017CB28  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 8017FB2C 0017CB2C  3B E3 00 00 */	addi r31, r3, 0
/* 8017FB30 0017CB30  93 C1 00 28 */	stw r30, 0x28(r1)
/* 8017FB34 0017CB34  3B C5 00 00 */	addi r30, r5, 0
/* 8017FB38 0017CB38  93 A1 00 24 */	stw r29, 0x24(r1)
/* 8017FB3C 0017CB3C  3B A4 00 00 */	addi r29, r4, 0
/* 8017FB40 0017CB40  38 81 00 18 */	addi r4, r1, 0x18
/* 8017FB44 0017CB44  4B FF AD F9 */	bl __CARDGetControlBlock
/* 8017FB48 0017CB48  2C 03 00 00 */	cmpwi r3, 0
/* 8017FB4C 0017CB4C  40 80 00 08 */	bge lbl_8017FB54
/* 8017FB50 0017CB50  48 00 00 C0 */	b lbl_8017FC10
lbl_8017FB54:
/* 8017FB54 0017CB54  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8017FB58 0017CB58  38 9D 00 00 */	addi r4, r29, 0
/* 8017FB5C 0017CB5C  38 A1 00 14 */	addi r5, r1, 0x14
/* 8017FB60 0017CB60  4B FF F1 A1 */	bl __CARDGetFileNo
/* 8017FB64 0017CB64  7C 64 1B 79 */	or. r4, r3, r3
/* 8017FB68 0017CB68  40 80 00 10 */	bge lbl_8017FB78
/* 8017FB6C 0017CB6C  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8017FB70 0017CB70  4B FF AE 85 */	bl __CARDPutControlBlock
/* 8017FB74 0017CB74  48 00 00 9C */	b lbl_8017FC10
lbl_8017FB78:
/* 8017FB78 0017CB78  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8017FB7C 0017CB7C  80 81 00 14 */	lwz r4, 0x14(r1)
/* 8017FB80 0017CB80  4B FF F4 41 */	bl __CARDIsOpened
/* 8017FB84 0017CB84  2C 03 00 00 */	cmpwi r3, 0
/* 8017FB88 0017CB88  41 82 00 14 */	beq lbl_8017FB9C
/* 8017FB8C 0017CB8C  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8017FB90 0017CB90  38 80 FF FF */	li r4, -1
/* 8017FB94 0017CB94  4B FF AE 61 */	bl __CARDPutControlBlock
/* 8017FB98 0017CB98  48 00 00 78 */	b lbl_8017FC10
lbl_8017FB9C:
/* 8017FB9C 0017CB9C  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8017FBA0 0017CBA0  4B FF CB 41 */	bl __CARDGetDirBlock
/* 8017FBA4 0017CBA4  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8017FBA8 0017CBA8  38 80 00 FF */	li r4, 0xff
/* 8017FBAC 0017CBAC  80 C1 00 18 */	lwz r6, 0x18(r1)
/* 8017FBB0 0017CBB0  38 A0 00 40 */	li r5, 0x40
/* 8017FBB4 0017CBB4  54 00 30 32 */	slwi r0, r0, 6
/* 8017FBB8 0017CBB8  7C 63 02 14 */	add r3, r3, r0
/* 8017FBBC 0017CBBC  A0 03 00 36 */	lhz r0, 0x36(r3)
/* 8017FBC0 0017CBC0  B0 06 00 BE */	sth r0, 0xbe(r6)
/* 8017FBC4 0017CBC4  4B E8 59 21 */	bl memset
/* 8017FBC8 0017CBC8  28 1E 00 00 */	cmplwi r30, 0
/* 8017FBCC 0017CBCC  41 82 00 0C */	beq lbl_8017FBD8
/* 8017FBD0 0017CBD0  7F C0 F3 78 */	mr r0, r30
/* 8017FBD4 0017CBD4  48 00 00 0C */	b lbl_8017FBE0
lbl_8017FBD8:
/* 8017FBD8 0017CBD8  3C 60 80 18 */	lis r3, __CARDDefaultApiCallback@ha
/* 8017FBDC 0017CBDC  38 03 97 EC */	addi r0, r3, __CARDDefaultApiCallback@l
lbl_8017FBE0:
/* 8017FBE0 0017CBE0  80 A1 00 18 */	lwz r5, 0x18(r1)
/* 8017FBE4 0017CBE4  3C 60 80 18 */	lis r3, DeleteCallback@ha
/* 8017FBE8 0017CBE8  38 83 FA 78 */	addi r4, r3, DeleteCallback@l
/* 8017FBEC 0017CBEC  90 05 00 D0 */	stw r0, 0xd0(r5)
/* 8017FBF0 0017CBF0  7F E3 FB 78 */	mr r3, r31
/* 8017FBF4 0017CBF4  4B FF CC 8D */	bl __CARDUpdateDir
/* 8017FBF8 0017CBF8  7C 7F 1B 79 */	or. r31, r3, r3
/* 8017FBFC 0017CBFC  40 80 00 10 */	bge lbl_8017FC0C
/* 8017FC00 0017CC00  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8017FC04 0017CC04  7F E4 FB 78 */	mr r4, r31
/* 8017FC08 0017CC08  4B FF AD ED */	bl __CARDPutControlBlock
lbl_8017FC0C:
/* 8017FC0C 0017CC0C  7F E3 FB 78 */	mr r3, r31
lbl_8017FC10:
/* 8017FC10 0017CC10  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8017FC14 0017CC14  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 8017FC18 0017CC18  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 8017FC1C 0017CC1C  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 8017FC20 0017CC20  38 21 00 30 */	addi r1, r1, 0x30
/* 8017FC24 0017CC24  7C 08 03 A6 */	mtlr r0
/* 8017FC28 0017CC28  4E 80 00 20 */	blr 

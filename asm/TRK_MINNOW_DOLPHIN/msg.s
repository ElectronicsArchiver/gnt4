.include "macros.inc"

.section .text  # 0x80187794 - 0x80187970

.global TRKMessageSend
TRKMessageSend:
/* 80187794 00184794  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80187798 00184798  7C 08 02 A6 */	mflr r0
/* 8018779C 0018479C  38 A0 00 00 */	li r5, 0
/* 801877A0 001847A0  90 01 00 24 */	stw r0, 0x24(r1)
/* 801877A4 001847A4  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 801877A8 001847A8  7C 7F 1B 78 */	mr r31, r3
/* 801877AC 001847AC  93 C1 00 18 */	stw r30, 0x18(r1)
/* 801877B0 001847B0  93 A1 00 14 */	stw r29, 0x14(r1)
/* 801877B4 001847B4  93 81 00 10 */	stw r28, 0x10(r1)
/* 801877B8 001847B8  81 03 00 08 */	lwz r8, 8(r3)
/* 801877BC 001847BC  38 60 00 00 */	li r3, 0
/* 801877C0 001847C0  28 08 00 00 */	cmplwi r8, 0
/* 801877C4 001847C4  40 81 00 BC */	ble lbl_80187880
/* 801877C8 001847C8  28 08 00 08 */	cmplwi r8, 8
/* 801877CC 001847CC  38 88 FF F8 */	addi r4, r8, -8
/* 801877D0 001847D0  40 81 00 88 */	ble lbl_80187858
/* 801877D4 001847D4  38 04 00 07 */	addi r0, r4, 7
/* 801877D8 001847D8  54 00 E8 FE */	srwi r0, r0, 3
/* 801877DC 001847DC  7C 09 03 A6 */	mtctr r0
/* 801877E0 001847E0  28 04 00 00 */	cmplwi r4, 0
/* 801877E4 001847E4  40 81 00 74 */	ble lbl_80187858
lbl_801877E8:
/* 801877E8 001847E8  39 23 00 10 */	addi r9, r3, 0x10
/* 801877EC 001847EC  38 63 00 08 */	addi r3, r3, 8
/* 801877F0 001847F0  7D 3F 4A 14 */	add r9, r31, r9
/* 801877F4 001847F4  88 09 00 00 */	lbz r0, 0(r9)
/* 801877F8 001847F8  88 89 00 01 */	lbz r4, 1(r9)
/* 801877FC 001847FC  7C A5 02 14 */	add r5, r5, r0
/* 80187800 00184800  88 09 00 02 */	lbz r0, 2(r9)
/* 80187804 00184804  54 A5 06 3E */	clrlwi r5, r5, 0x18
/* 80187808 00184808  88 E9 00 03 */	lbz r7, 3(r9)
/* 8018780C 0018480C  7C 85 22 14 */	add r4, r5, r4
/* 80187810 00184810  88 C9 00 04 */	lbz r6, 4(r9)
/* 80187814 00184814  54 84 06 3E */	clrlwi r4, r4, 0x18
/* 80187818 00184818  88 A9 00 05 */	lbz r5, 5(r9)
/* 8018781C 0018481C  7C 04 02 14 */	add r0, r4, r0
/* 80187820 00184820  88 89 00 06 */	lbz r4, 6(r9)
/* 80187824 00184824  54 0A 06 3E */	clrlwi r10, r0, 0x18
/* 80187828 00184828  88 09 00 07 */	lbz r0, 7(r9)
/* 8018782C 0018482C  7C EA 3A 14 */	add r7, r10, r7
/* 80187830 00184830  54 E7 06 3E */	clrlwi r7, r7, 0x18
/* 80187834 00184834  7C C7 32 14 */	add r6, r7, r6
/* 80187838 00184838  54 C6 06 3E */	clrlwi r6, r6, 0x18
/* 8018783C 0018483C  7C A6 2A 14 */	add r5, r6, r5
/* 80187840 00184840  54 A5 06 3E */	clrlwi r5, r5, 0x18
/* 80187844 00184844  7C 85 22 14 */	add r4, r5, r4
/* 80187848 00184848  54 84 06 3E */	clrlwi r4, r4, 0x18
/* 8018784C 0018484C  7C 04 02 14 */	add r0, r4, r0
/* 80187850 00184850  54 05 06 3E */	clrlwi r5, r0, 0x18
/* 80187854 00184854  42 00 FF 94 */	bdnz lbl_801877E8
lbl_80187858:
/* 80187858 00184858  7C 03 40 50 */	subf r0, r3, r8
/* 8018785C 0018485C  7C 09 03 A6 */	mtctr r0
/* 80187860 00184860  7C 03 40 40 */	cmplw r3, r8
/* 80187864 00184864  40 80 00 1C */	bge lbl_80187880
lbl_80187868:
/* 80187868 00184868  38 03 00 10 */	addi r0, r3, 0x10
/* 8018786C 0018486C  38 63 00 01 */	addi r3, r3, 1
/* 80187870 00184870  7C 1F 00 AE */	lbzx r0, r31, r0
/* 80187874 00184874  7C 05 02 14 */	add r0, r5, r0
/* 80187878 00184878  54 05 06 3E */	clrlwi r5, r0, 0x18
/* 8018787C 0018487C  42 00 FF EC */	bdnz lbl_80187868
lbl_80187880:
/* 80187880 00184880  68 A0 00 FF */	xori r0, r5, 0xff
/* 80187884 00184884  38 60 00 7E */	li r3, 0x7e
/* 80187888 00184888  54 1E 06 3E */	clrlwi r30, r0, 0x18
/* 8018788C 0018488C  48 00 62 C1 */	bl WriteUART1
/* 80187890 00184890  2C 03 00 00 */	cmpwi r3, 0
/* 80187894 00184894  40 82 00 5C */	bne lbl_801878F0
/* 80187898 00184898  3B A0 00 00 */	li r29, 0
/* 8018789C 0018489C  48 00 00 48 */	b lbl_801878E4
lbl_801878A0:
/* 801878A0 001848A0  38 1D 00 10 */	addi r0, r29, 0x10
/* 801878A4 001848A4  7F 9F 00 AE */	lbzx r28, r31, r0
/* 801878A8 001848A8  28 1C 00 7E */	cmplwi r28, 0x7e
/* 801878AC 001848AC  41 82 00 0C */	beq lbl_801878B8
/* 801878B0 001848B0  28 1C 00 7D */	cmplwi r28, 0x7d
/* 801878B4 001848B4  40 82 00 1C */	bne lbl_801878D0
lbl_801878B8:
/* 801878B8 001848B8  38 60 00 7D */	li r3, 0x7d
/* 801878BC 001848BC  48 00 62 91 */	bl WriteUART1
/* 801878C0 001848C0  2C 03 00 00 */	cmpwi r3, 0
/* 801878C4 001848C4  6B 80 00 20 */	xori r0, r28, 0x20
/* 801878C8 001848C8  54 1C 06 3E */	clrlwi r28, r0, 0x18
/* 801878CC 001848CC  40 82 00 24 */	bne lbl_801878F0
lbl_801878D0:
/* 801878D0 001848D0  7F 83 07 74 */	extsb r3, r28
/* 801878D4 001848D4  48 00 62 79 */	bl WriteUART1
/* 801878D8 001848D8  2C 03 00 00 */	cmpwi r3, 0
/* 801878DC 001848DC  40 82 00 14 */	bne lbl_801878F0
/* 801878E0 001848E0  3B BD 00 01 */	addi r29, r29, 1
lbl_801878E4:
/* 801878E4 001848E4  80 1F 00 08 */	lwz r0, 8(r31)
/* 801878E8 001848E8  7C 1D 00 40 */	cmplw r29, r0
/* 801878EC 001848EC  41 80 FF B4 */	blt lbl_801878A0
lbl_801878F0:
/* 801878F0 001848F0  2C 03 00 00 */	cmpwi r3, 0
/* 801878F4 001848F4  40 82 00 40 */	bne lbl_80187934
/* 801878F8 001848F8  57 C0 06 3E */	clrlwi r0, r30, 0x18
/* 801878FC 001848FC  7F DC F3 78 */	mr r28, r30
/* 80187900 00184900  28 00 00 7E */	cmplwi r0, 0x7e
/* 80187904 00184904  41 82 00 0C */	beq lbl_80187910
/* 80187908 00184908  28 00 00 7D */	cmplwi r0, 0x7d
/* 8018790C 0018490C  40 82 00 1C */	bne lbl_80187928
lbl_80187910:
/* 80187910 00184910  38 60 00 7D */	li r3, 0x7d
/* 80187914 00184914  48 00 62 39 */	bl WriteUART1
/* 80187918 00184918  2C 03 00 00 */	cmpwi r3, 0
/* 8018791C 0018491C  6B 80 00 20 */	xori r0, r28, 0x20
/* 80187920 00184920  54 1C 06 3E */	clrlwi r28, r0, 0x18
/* 80187924 00184924  40 82 00 10 */	bne lbl_80187934
lbl_80187928:
/* 80187928 00184928  7F 83 07 74 */	extsb r3, r28
/* 8018792C 0018492C  48 00 62 21 */	bl WriteUART1
/* 80187930 00184930  2C 03 00 00 */	cmpwi r3, 0
lbl_80187934:
/* 80187934 00184934  2C 03 00 00 */	cmpwi r3, 0
/* 80187938 00184938  40 82 00 0C */	bne lbl_80187944
/* 8018793C 0018493C  38 60 00 7E */	li r3, 0x7e
/* 80187940 00184940  48 00 62 0D */	bl WriteUART1
lbl_80187944:
/* 80187944 00184944  2C 03 00 00 */	cmpwi r3, 0
/* 80187948 00184948  40 82 00 08 */	bne lbl_80187950
/* 8018794C 0018494C  48 00 62 29 */	bl WriteUARTFlush
lbl_80187950:
/* 80187950 00184950  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80187954 00184954  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80187958 00184958  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8018795C 0018495C  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80187960 00184960  83 81 00 10 */	lwz r28, 0x10(r1)
/* 80187964 00184964  7C 08 03 A6 */	mtlr r0
/* 80187968 00184968  38 21 00 20 */	addi r1, r1, 0x20
/* 8018796C 0018496C  4E 80 00 20 */	blr 
